<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Stay organized with our user-friendly Calendar featuring events, reminders, and a customizable interface. Built with HTML, CSS, and JavaScript. Start scheduling today!" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- CSS -->
    <link rel="stylesheet" href="../../CSS/loader.css">
    <link rel="stylesheet" href="../../CSS/sidbar.css">
    <link rel="stylesheet" href="../../CSS/panel.css">
    <link rel="shortcut icon" href="../media/IMG/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="../../CSS/Registro.css">
    <link rel="stylesheet" href="../../CSS/modalUsuario.css">


    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!--SWEETALERT-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.min.css">

    <title>MODISTERIA D.L || PANEL CONTROL</title>
</head>

<body>


    <!--LOADER-->
    <div class="loader" id="loader">
        <div class="loaderr">

            <svg viewBox="0 0 18.528 35.424" version="1.1" y="0" x="0" height="369" width="193"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M3.358 35.05c.435-.175.646-.408.861-.95.374-.94.698-1.52 1.145-2.05.78-.92 1.757-1.638 2.666-1.957.603-.212.9-.204 1.505.041.843.343 1.597.25 2.062-.254.95-1.029 3.95-6.873 5.841-11.376.869-2.07.831-1.882.797-3.962-.034-2.106-.024-2.064-.927-3.887-1.639-3.31-4.426-6.582-7.147-8.392C8.71 1.298 6.715.504 5.296.328c-.718-.09-2.465-.001-3.183.16C.943.752.279 1.268.279 1.917c0 .119.437 1.136.97 2.26.533 1.126 1.044 2.291 1.135 2.591.334 1.106.776 3.567.945 5.27.065.652.357 1.286.751 1.633.419.367 1.351.786 1.964.883.286.044.534.096.553.115.018.018-.129.128-.327.244-.761.446-1.432 1.439-1.74 2.574-.216.802-.194 2.914.045 4.121.24 1.212.575 2.318 1.031 3.403.46 1.092.535 1.458.439 2.135-.223 1.575-1.958 4.03-3.489 4.937-.693.41-.885.587-1.066.98-.173.375-.185.535-.069.953.223.802 1.206 1.326 1.937 1.033z"
                    fill="#000"></path>
            </svg>


            <svg viewBox="0 0 2.4 14.4" version="1.1" y="0" x="0" height="150" width="25"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M2.2 13c0 .641-.447 1.16-1 1.16-.553 0-1-.519-1-1.16V1.4C.2.759.647.24 1.2.24c.553 0 1 .519 1 1.16z"
                    fill="#000"></path>
            </svg>


            <svg viewBox="0 0 18.528 35.424" version="1.1" y="0" x="0" height="369" width="193"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M15.105 35.155c-.42-.196-.627-.482-.902-1.253-.544-1.517-2.145-3.126-3.636-3.652-.69-.243-.887-.242-1.486.01-.617.26-1.342.278-1.798.045-.555-.283-1.76-2.262-3.476-5.708C2.628 22.232.984 18.575.455 17.144c-.236-.637-.237-.655-.237-2.485 0-2.164.01-2.209.9-4.013 1.011-2.049 2.53-4.189 4.185-5.9C7.679 2.293 9.783.995 12.49.313c.782-.197 1.554-.236 2.695-.137 1.619.14 2.38.38 2.882.909.21.22.246.321.243.684-.002.373-.122.67-.959 2.395-1.277 2.63-1.59 3.806-2.035 7.63-.111.951-.316 1.426-.809 1.87-.52.47-1.306.807-2.165.928l-.391.054.35.224c.897.574 1.58 1.674 1.834 2.956.193.969.12 2.791-.164 4.15-.222 1.061-.696 2.518-1.12 3.443-.336.735-.411 1.584-.203 2.3.505 1.738 2.056 3.692 3.736 4.705.693.417.938.83.874 1.476-.104 1.071-1.193 1.706-2.153 1.256z"
                    fill="#000"></path>
            </svg>
        </div>
    </div>

    <div class="wrapper">
        <div class="section">
            <div class="top_navbar">
                <div class="hamburger">
                    <a href="#">
                        <i class="fas fa-bars"></i>

                    </a>
                </div>
            </div>


            <div id="navbar-container"></div>
            <script>
                fetch('static/navbar.html')
                    .then(response => response.text())
                    .then(data => {
                        document.getElementById('navbar-container').innerHTML = data
                    })
                    .catch(error => console.error('Error al cargar el navbar'))
            </script>

            <div class="container">
                <h1>USUARIOS</h1> <br>
                <button class="btn-agregar" id="btn-abrir-modal-agregar">Agregar</button>
                <table id="Tabla" class="table table__usuarios">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Teléfono</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Editar</th>
                            <th>Eliminar</th>
                        </tr>
                    </thead>
                    <tbody id="table-users">
                        <script>
                            function mostrar() {
                                let table = document.getElementById('table-users');
                                table.innerHTML = ``;
                                let listaUsuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
                                listaUsuarios.forEach(function (usuario) {
                                    table.innerHTML += `
                                        <tr>
                                            <td>${usuario.nombre}</td>
                                            <td>${usuario.apellido}</td>
                                            <td>${usuario.celular}</td>
                                            <td>${usuario.email}</td>
                                            <td>Aún no hay roles</td>
                                            <td class="btn-abrir-modal-editar" onclick="abrirModalEditar(${usuario.id})"><img class="table_img" src="../../MEDIA/IMG/editar.png" alt=""></td>
                                            <td class="btn-abrir-modal-eliminar" onclick="ModalEliminar(${usuario.id})"><img class="table_img" src="../../MEDIA/IMG/basura.png" alt=""></td>
                                        </tr>
                                    `;
                                });
                            }
                            mostrar();
                        </script>
                    </tbody>
                </table><br>

                <div class="pagination">
                    <button id="prevButton">Anterior</button>
                    <div id="paginationButtons"></div>
                    <button id="nextButton">Siguiente</button>
                </div>
            </div>

            <dialog class="modal" id="modal-agregar">
                <h3 class="title-modal-agregar">AGREGAR USUARIO</h3>
                <form class="formulario" id="form">
                    <input type="hidden" id="id">
                    <div>
                        <label for="">Nombre</label>
                        <input type="text" name="nombre" id="nombre">
                    </div>
                    <div> <br>
                        <label for="">Apellido</label>
                        <input type="text" name="apellido" id="apellido">
                    </div>
                    <div> <br>
                        <label for="">Celular</label>
                        <input type="text" name="celular" id="celular">
                    </div>
                    <div> <br>
                        <label for="">Email</label>
                        <input type="text" name="email" id="email">
                    </div>
                    <div> <br>
                        <label for="">Contraseña</label>
                        <input type="text" name="password" id="password">
                    </div>
                </form>
                <button class="btn-modal" id="btn-cerrar-modal-agregar"><i class="fa-solid fa-x"></i></button>
                <button id="btnAddUser" class="btnAgregar">Registrar usuario</button>
            </dialog>

            <dialog class="modal" id="modal-editar">

                <script>
                    function abrirModalEditar(id) {
                        let listaUsuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
                        let usuario = listaUsuarios.find(u => u.id == id);
                        let modalEditar = document.getElementById('modal-editar')

                        modalEditar.innerHTML = `
                            <h3 class="title-modal-editar">EDITAR USUARIO</h3>
                            <form class="formulario" id="form">
                                <div>
                                    <input type="hidden" name="id" id="id_editar" value="${usuario.id}">
                                    <label for="">Nombre</label>
                                    <input type="text" name="nombre" id="nombre_editar" value="${usuario.nombre}">
                                </div>
                                <div> <br>
                                    <label for="">Apellido</label>
                                    <input type="text" name="apellido" id="apellido_editar" value="${usuario.apellido}">
                                </div>
                                <div> <br>
                                    <label for="">Celular</label>
                                    <input type="text" name="celular" id="celular_editar" value="${usuario.celular}">
                                </div>
                                <div> <br>
                                    <label for="">Email</label>
                                    <input type="text" name="email" id="email_editar" disabled value="${usuario.email}">
                                </div>
                            </form>
                            <button class="btn-modal" id="btn-cerrar-modal-editar" onclick="cerrarModalEditar()"><i class="fa-solid fa-x"></i></button>
                            <button class="btn-editar-modal" id="btnEditarUser" onclick="editarU(${usuario.id})">Editar usuario</button>
                        `;
                    }
                </script>
            </dialog>
            <dialog class="modal-eliminar" id="modal-eliminar">
                <script>
                    function ModalEliminar(id) {
                        let listaUsuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
                        let usuario = listaUsuarios.find(u => u.id == id);
                        let modalEditar = document.getElementById('modal-eliminar')
                        modalEditar.innerHTML = `
                        <img src="../../MEDIA/IMG/alerta.png" alt="" class="alertaimg">
                        <h3>¿Estás seguro que deseas eliminar a ${usuario.nombre}?</h3><br>
                        <button onclick="eliminar(${usuario.id})">Eliminar usuario</button>
                        <button id="btn-cerrar-modal-eliminar" onclick="cerrarModalEliminar()"><i class="fa-solid fa-x"></i></button>`
                    }
                </script>
            </dialog>
        </div>
        <div id="sidebar-container">

        </div>
        <script>
            fetch('static/sidebar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('sidebar-container').innerHTML = data
                })
                .catch(error => console.error('Error al cargar el sidebar'))
        </script>

    </div>

    <footer>
        <div class="footer__network">
            <img src="../../MEDIA/IMG/facebook-square-logo-24.png" alt="">
            <img src="../../MEDIA/IMG/pinterest-logo-24.png" alt="">
            <img src="../../MEDIA/IMG/whatsapp-logo-24.png" alt="">
        </div>
        <div class="footer__logo">
            <img class="img_footer" src="../../MEDIA/IMG/icon.png" alt="">
            <h1>Modisteria Doña Luz</h1>
        </div>
        <div class="footer__policy">
            <link rel="stylesheet" href="">
            <p>
            <p>Politicas de privacidad</p>
            <p>|</p>
            <p>Iniciar Sesion</p>
            </p>

        </div>
        <div class="footer__copyright">
            <img src="../../MEDIA/IMG/copyright-solid-24.png" alt="">
            <p>2023 Copyright ModisteriaDoñaLuz.com</p>
        </div>
    </footer>

    <!-- JS -->
    <script src="../../JS/sidbar.js"></script>
    <script src="../../JS/tablas.js"></script>
    <script src="../../JS/localStorage/usuarios.js"></script>
    <script src="../../JS/modalUsuarios.js"></script>


    <!-- AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>

    <!--SWEETALERT-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.all.min.js"></script>

    <!--LOADER-->
    <script src="../../JS/loader.js"></script>

</body>

</html>